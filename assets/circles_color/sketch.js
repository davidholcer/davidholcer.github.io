var levels,radius,P,total;console.log(" __    __ ______   _____    ______  __  __\n/\\ \\  / //\\  __ \\ /\\  __-. /\\__  _\\/\\ \\_\\ \\\n\\ \\ \\/ / \\ \\  __ \\\\ \\ \\/\\ \\\\/_/\\ \\/\\ \\  __ \\\n \\ \\__/   \\ \\_\\ \\_\\\\ \\____-   \\ \\_\\ \\ \\_\\ \\_\\\n  \\/_/     \\/_/\\/_/ \\/____/    \\/_/  \\/_/\\/_/\n\n");let circles=[];var bRotate,dtime,ddTime,clickTime,ctime,oDdFactor,debug,decreasing;let factorAmt,retTime,goTime,opacity,opacityAmt,spdAmt,bgColor,obgChoice,bgChoice,bgCycleTime,bDay,darkMode,cc,playedCount,colorScheme,colorSchemeTwo,cOrig,clicked,onClick,randPow,density,a,b,c,d,shapeProbs,shapeNops,shapeOps,oSpeed,rf,maxDdFactor,strokeType,paused,frozen,description="'Chaotic Colored Shapes' is a generative interactive work in which shapes drawn within concentric circles move chaotically around the screen. Their motion is organic and in a state of constant equilibrium. This project is a result of months of experimentation and tweaking.";function decodeShapes(e){let t=[];for(let r=0;r<e.length;r++)t.push("cltrphso".indexOf(e[r])+1);return t}function setup(){switch(createCanvas(windowWidth,windowHeight),console.log("Screen Dimensions: "+width+"px x "+height+"px"),slength=min(windowWidth,windowHeight),xwidth=(windowWidth-slength)/2,colorMode(HSB),describe(description),levels=window.$fxhashFeatures.Levels,radius=50*slength/1800*6/(1.5*levels),total=random_int(15,55),paused=!1,frozen=!1,debug=!1,decreasing=!1,opacity=!1,opacityAmt=.7,spdAmt=.005,ctime=2e3,oSpeed=window.$fxhashFeatures.Speed,strokeType=window.$fxhashFeatures["Stroke Type"],onClick=window.$fxhashFeatures["Click Ease"],oSpeed){case"very slow":density=random_num(.2,.5),maxDdFactor=20;break;case"slow":density=random_num(.2,.5),maxDdFactor=40;break;case"medium":density=random_num(.2,.8),maxDdFactor=40;break;case"fast":density=random_num(.3,.95),maxDdFactor=40;break;case"very fast":density=random_num(.95,1),maxDdFactor=160}window.$fxhashFeatures.Density=`${(100*density).toFixed(1)}%`,rf=1.15,shapeNops=window.$fxhashFeatures["Number of Shapes"],shapeOps=decodeShapes(window.$fxhashFeatures.Shapes),bRotate=!0,rectMode(CENTER),clicked=!1,bgCycleTime=60*random_int(20,40),factorAmt=.2,cOrig=!0,colorScheme={"Techno Vanilla":["#333333","#666A86","#FF6700","#E8DDB5"],"Retro Rainbow":["#238DA5","#599D6B","#FDBC2E","#C84A4D","#2A303E"],Halloween:["#FA8334","#1E3888","#191308","#C45AB3","#89937C"],Cooltone:["#0081A7","#00AFB9","#291F1E","#FED9B7","#F07167"],"Salmon Blues":["#E07A5F","#3D405B","#81B29A","#F2CC8F"],"Gold Wine":["#5F0F40","#9A031E","#FB8B24","#E36414","#0F4C5C"],Japonica:["#c9cba3","#ffe1a8","#e26d5c","#723d46","#472d30"],"Minimal Ice":["#dd6e42","#e8dab2","#4f6d7a","#c0d6df","#eaeaea"],"Vintage Fire":["#001219","#005F73","#0A9396","#94D2BD","#E9D8A6","#EE9B00","#CA6702","#BB3E03","#AE2012","#9B2226"],"Flame Pea":["#ee4a1b","#61d5d4","#3e73a2","#bebc9e","#060b0a"],"Jaguar Lavender":["#e3170a","#2a2b2a","#fdb833","#7d8491","#c04cfd"],"Mandalay Glacier":["#4f345a","#e59500","#7ebdc3","#e3879e","#f25c54"],"Pastel Tabasco":["#F0B700","#373000","#E76C00","#BA0000","#CFCFC5"],Guacamole:["#85ADB3","#BBBF45","#A2A641","#E7D7AD","#BF544B"],"Blue Honey":["#ABCEC0","#F6DEB0","#FFA034","#26839C","#252A2B"],"Red Pill Blue Pill":["#2f4858","#85adb3","#e7d7ad","#bf544b","#2f4858"],"Purple Cabbage":["#8C6582","#8C5483","#73246D","#E3D3E4","#3B0127"],Highlighters:["#565552","#F9D400","#FF721B","#FF483A","#3FD5E5"],Grayscale:["#000000","#111111","#222222","#333333","#444444","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff"]},cc=window.$fxhashFeatures["Color Scheme"],playedCount=0,goTime=random_int(10,20),retTime=random_int(20,50),window.$fxhashFeatures["Return Time"]=retTime,window.$fxhashFeatures["Go Time"]=goTime,frameRate(60);var e=new Date;e.getHours()>=18||e.getHours()<6?(bDay=0,darkMode=!0):e.getHours()>=6&&e.getHours()<18&&(bDay=1,darkMode=!1),checkTime(e),populateCircles(),bgColor=updateBgColor()}function draw(){background(bgColor);for(var e=0;e<circles.length;e++){push(),translate(width/2,height/2);let t=circles[e];t.drawShape(),t.rotate(),pop()}if(!paused)for(e=0;e<circles.length;e++){var t=circles[e],r=width/2+t.r/2*t.l*cos(t.t)+t.ddFactor*t.dd.x,a=height/2+t.r/2*t.l*sin(t.t)+t.ddFactor*t.dd.y;if(t.t+=t.dt,t.tt+=1,!clicked&&r<=width-t.r/2&&r>=t.r/2&&a<=height-t.r/2&&a>=t.r/2&&(int(t.tt/60)%goTime==0||int(t.tt/60)%goTime==1)&&int(t.tt/60)%retTime!=0&&int(t.tt/60)%retTime!=1&&t.tt/60!=0&&t.ddFactor<maxDdFactor&&(t.ddFactor+=t.of),clicked){let e;e="Mixed"==onClick?t.rand<.5?easeOut(constrain(millis()-clickTime,0,ctime)/ctime):easeOutP(constrain(millis()-clickTime,0,ctime)/ctime):"Polynomial"==onClick?easeOutP(constrain(millis()-clickTime,0,ctime)/ctime):easeOut(constrain(millis()-clickTime,0,ctime)/ctime),e=Math.max(1e-4,e),t.ddFactor=e*t.pcddFactor,t.dd=createVector(lerp(0,t.pcdd.x,sqrt(e)),lerp(0,t.pcdd.y,sqrt(e)))}(int(t.tt/60)%retTime==0||int(t.tt/60)%retTime==1&&t.tt/60!=0)&&(t.ddFactor=returnToCenter(t.ddFactor,t.rof*t.of));let i=width/2-t.r/2*(rf+t.l),s=height/2-t.r/2*(rf+t.l);abs(t.dd.x+t.ddt.x)<i/t.ddFactor?t.dd.add(t.ddt.x,0):t.ddt.set(-1*t.ddt.x,t.ddt.y),abs(t.dd.y+t.ddt.y)<s/t.ddFactor?t.dd.add(0,t.ddt.y):t.ddt.set(t.ddt.x,-1*t.ddt.y),t.dd.set(constrain(t.dd.x,-i/t.ddFactor,i/t.ddFactor),constrain(t.dd.y,-s/t.ddFactor,s/t.ddFactor))}changeBg(1-abs(bgCycleTime/2-playedCount%bgCycleTime)/(bgCycleTime/2),bgChoice),paused||frozen||(playedCount+=1),keyIsDown(188)&&opacity?adjusT(-spdAmt):keyIsDown(190)&&opacity&&adjusT(spdAmt)}let easeOutP=e=>e<.5?1-4*pow(e,3):pow(-2*e+2,3)/2,easeOut=e=>(1+(cos(PI*e)-1)/2)**2;function returnToCenter(e,t){return e-t<0?.001:e-t}function adjusT(e){opacityAmt+e<=.95&&opacityAmt+e>=.1&&(opacityAmt+=e)}function changeBg(e,t){var r=color(hue(t),saturation(t),brightness(t)/1.1),a=color(hue(t),saturation(t),1.1*brightness(t)),i=color(hue(t),saturation(t),brightness(t)/5),s=color(hue(t),saturation(t),3*brightness(t));bgColor=darkMode?lerpColor(r,i,e):lerpColor(a,s,e),bgColor.setAlpha(.6)}function checkTime(e){let t;e.getHours()>=18||e.getHours()<6?t=0:e.getHours()>=6&&e.getHours()<18&&(t=1),t!=bDay&&(1==t&&darkMode||0==t&&!darkMode)&&(darkMode=1!=darkMode,bDay=t?1:0)}function windowResized(){resizeCanvas(windowWidth,windowHeight),nslength=min(windowWidth,windowHeight);for(let e=0;e<circles.length;e++)circles[e].r=circles[e].r/slength*nslength;slength=nslength+0}function keyTyped(){switch(key){case" ":case"n":for(var e=0;e<circles.length;e++){let t=circles[e];t.t=random_num(0,2*PI),t.r=t.or,t.ra=random_num(0,2*PI),t.ddFactor=oDdFactor,t.pcddFactor=oDdFactor,t.dd=createVector(0,0),t.pcdd=createVector(0,0)}updateBgColor(!1);break;case"d":darkMode=!darkMode;break;case"f":frozen=!frozen;break;case"p":paused=!paused;break;case"r":bRotate=!bRotate;break;case"o":opacity=!opacity}}function mouseWheel(e){for(var t=Math.sign(e.delta),r=0;r<circles.length;r++){var a=circles[r].or;circles[r].r-.01*t*a>.05*a&&circles[r].r-.01*t*a<1.5*a&&(circles[r].r-=.01*t*a)}}function mousePressed(){clickTime=millis();for(var e=0;e<circles.length;e++){var t=circles[e];t.pcddFactor=t.ddFactor+0,t.pcdd=createVector(0,0).set(t.dd)}clicked=!0}function mouseReleased(){clicked=!1}function populateCircles(){let e=fxrand()<.4;for(let a=0;a<levels;a++)for(let i=0;i<total;i++){var t=random_num(0,2*PI),r=random_num(a/10*radius,(a+1)*radius);if(oDdFactor=10,fxrand()<density){let e=fxrand(),i=circles.length;circles.push(new Circle(t,a,r,cc,e,i))}if(circles.length>0){let t=circles[circles.length-1];2!=t.shape&&("None"==strokeType&&(t.sw=0),"None"!=strokeType&&t.rand>.1&&t.rand<.3&&e&&(t.sw=0))}}}function polygon(e,t,r,a){let i=TWO_PI/a;beginShape();for(let a=0;a<TWO_PI;a+=i){let i=e+cos(a)*r,s=t+sin(a)*r;vertex(i,s)}endShape(CLOSE)}function updateBgColor(e=!0){let t=colorScheme[cc],r=random_int(0,t.length-1);if(!e)for(;t[r]==obgChoice;)r=random_int(0,t.length-1);return obgChoice=t[r],bgChoice=t[r],bgChoice}class Circle{constructor(e,t,r,a,i,s){switch(this.count=s,this.t=e,this.l=t,this.r=r,this.or=r,this.sw=i,this.osw=i,this.rand=fxrand(),this.shape=shapeOps[random_int(0,shapeOps.length-1)],this.tt=random_num(1,2100),oSpeed){case"very slow":this.dt=.002;break;case"slow":this.dt=.005;break;case"medium":this.dt=.01;break;case"fast":this.dt=.03;break;case"very fast":this.dt=.05}switch(this.dt=random_num(-this.dt,this.dt),this.rlf=[random_num(.98,1.02),random_num(.98,1.02)],this.dd=createVector(0,0),this.pcdd=createVector(0,0),this.ddt=createVector(random_num(-.01,.01),random_num(-.01,.01)),this.c=color(colorScheme[a][random_int(0,colorScheme[a].length-1)]),this.ddFactor=oDdFactor,this.pcddFactor=oDdFactor,this.oCor=createVector(width,height),this.ra=random_num(0,2*PI),oSpeed){case"very slow":this.sra=1e3;break;case"slow":this.sra=800;break;case"medium":this.sra=600;break;case"fast":this.sra=400;break;case"very fast":this.sra=200}switch(this.dra=2*Math.sign(fxrand()-.5)*PI/this.sra*this.shape**.4,this.rof=random(1.1,4),oSpeed){case"very slow":this.of=random_num(.001,.01);break;case"slow":this.of=random_num(.01,.05);break;case"medium":this.of=random_num(.1,.3);break;case"fast":this.of=random_num(.3,.5);break;case"very fast":this.of=random_num(.5,.8)}}drawShape(){push(),strokeWeight(this.sw),opacity?this.c.setAlpha(opacityAmt):this.c.setAlpha(1),this.rand<.1&&"All"==strokeType?(noFill(),stroke(this.c),this.shape,this.sw=2*this.osw):(stroke("black"),fill(this.c));const e=this.rand>.1&&this.rand<.2&&"All"==strokeType;let t,r;switch(t=this.r/2*this.l*cos(this.t)+this.ddFactor*this.dd.x,r=this.r/2*this.l*sin(this.t)+this.ddFactor*this.dd.y,translate(t,r),rotate(this.ra),this.shape){case 1:circle(0,0,this.r),e&&(noStroke(),rotate(this.ra),fill(circles[(this.count+1)%circles.length].c),circle(0,0,this.r/2));break;case 2:strokeWeight(3*this.sw),line(-this.r/2,0,this.r/2,0);break;case 3:triangle(sin(2*PI/3)*this.r/2*rf,cos(2*PI/3)*this.r/2*rf,sin(2*PI*2/3)*this.r/2*rf,cos(2*PI*2/3)*this.r/2*rf,sin(2*PI)*this.r/2*rf,cos(2*PI)*this.r/2*rf),e&&(noStroke(),rotate(this.ra),fill(circles[(this.count+1)%circles.length].c),triangle(sin(2*PI/3)*this.r/4*rf,cos(2*PI/3)*this.r/4*rf,sin(2*PI*2/3)*this.r/4*rf,cos(2*PI*2/3)*this.r/4*rf,sin(2*PI)*this.r/4*rf,cos(2*PI)*this.r/4*rf));break;case 4:rect(0,0,this.r*this.rlf[0],this.r*this.rlf[1]),e&&(noStroke(),rotate(this.ra),fill(circles[(this.count+1)%circles.length].c),rect(0,0,this.r/sqrt(2)*this.rlf[0],this.r/sqrt(2)*this.rlf[1]));break;default:polygon(0,0,this.r/2*rf,this.shape),e&&(noStroke(),rotate(this.ra),fill(circles[(this.count+1)%circles.length].c),polygon(0,0,this.r/4*rf,this.shape))}pop()}rotate(){bRotate&&(this.ra+=this.dra)}}function getRandomSubarray(e,t){for(var r,a,i=e.slice(0),s=e.length;s--;)r=i[a=Math.floor((s+1)*fxrand())],i[a]=i[s],i[s]=r;return i.slice(0,t)}function random_num(e,t){return e+(t-e)*fxrand()}function random_int(e,t){return Math.floor(random_num(e,t+1))}function getHash(e){if(e){let t=e.split("").reduce(((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e),0);return Math.abs(t)}return null}